<database name="default" defaultIdMethod="native"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:noNamespaceSchemaLocation="https://raw.githubusercontent.com/propelorm/Propel2/master/resources/xsd/database.xsd">

  <table name="reason">
    <column name="id"              type="integer"          required="true"  primaryKey="true"  autoIncrement="true" />
    <column name="name"            type="varchar"          required="true"  primaryKey="false" autoIncrement="false" />
    <column name="is_grad"         type="boolean"          required="true"  primaryKey="false" autoIncrement="false" />
  </table>

  <table name="modality">
    <column name="id"              type="integer"          required="true"  primaryKey="true"  autoIncrement="true"  />
    <column name="name"            type="varchar"          required="true"  primaryKey="false" autoIncrement="false" />
  </table>

  <table name="visit">
    <column name="id"              type="char" size="36"   required="true"  primaryKey="true"  autoIncrement="false" />
    <column name="advisor_id"      type="char" size="7"    required="true"  primaryKey="false" autoIncrement="false" />
    <column name="student_id"      type="char" size="7"    required="true"  primaryKey="false" autoIncrement="false" />
    <column name="reason_id"       type="integer"          required="true"  primaryKey="false" autoIncrement="false" />
    <column name="modality_id"     type="integer"          required="true"  primaryKey="false" autoIncrement="false" />
    <column name="created_at"      type="timestamp"        required="true"  primaryKey="false" autoIncrement="false" />
    <column name="invited_at"      type="timestamp"        required="false" primaryKey="false" autoIncrement="false" />
    <column name="complete_at"     type="timestamp"        required="false" primaryKey="false" autoIncrement="false" />
    <column name="position"        type="integer"          required="false" primaryKey="false" autoIncrement="false" />
    <column name="custom_reason"   type="varchar"          required="false" primaryKey="false" autoIncrement="false" />
    <foreign-key foreignTable="student">
      <reference local="student_id" foreign="uid" />
    </foreign-key>
    <foreign-key foreignTable="employee">
      <reference local="advisor_id" foreign="uid" />
    </foreign-key>
    <foreign-key foreignTable="reason">
      <reference local="reason_id" foreign="id" />
    </foreign-key>
    <foreign-key foreignTable="modality">
      <reference local="modality_id" foreign="id" />
    </foreign-key>
  </table>

  <table name="student">
    <column name="uid"             type="char" size="7"    required="true"  primaryKey="true"  autoIncrement="false" />
    <column name="name"            type="varchar"          required="true"  primaryKey="false" autoIncrement="false" />
    <column name="major_id"        type="integer"          required="false" primaryKey="false" autoIncrement="false" />
    <column name="advisor_id"      type="char" size="7"    required="false" primaryKey="false" autoIncrement="false" />
    <column name="ritid"           type="char" size="9"    required="false" primaryKey="false" autoIncrement="false" />
    <foreign-key foreignTable="major">
      <reference local="major_id" foreign="id" />
    </foreign-key>
    <foreign-key foreignTable="employee">
      <reference local="advisor_id" foreign="uid" />
    </foreign-key>
  </table>

  <table name="employee">
    <column name="uid"             type="char" size="7"    required="true"  primaryKey="true"  autoIncrement="false" />
    <column name="hash"            type="char" size="60"   required="false" primaryKey="false" autoIncrement="false" />
    <column name="name"            type="varchar"          required="true"  primaryKey="false" autoIncrement="false" />
    <column name="role_id"         type="integer"          required="true"  primaryKey="false" autoIncrement="false" />
    <column name="picture_url"     type="varchar"          required="false" primaryKey="false" autoIncrement="false" />
    <column name="is_grad_advisor" type="boolean"          required="false" primaryKey="false" autoIncrement="false" />
    <column name="first_letter"    type="char" size="4"    required="false" primaryKey="false" autoIncrement="false" />
    <column name="last_letter"     type="char" size="4"    required="false" primaryKey="false" autoIncrement="false" />
    <foreign-key foreignTable="role">
      <reference local="role_id" foreign="id" />
    </foreign-key>
  </table>

  <table name="token">
    <column name="employeeId"      type="char" size="7"    required="true" primaryKey="true"   autoIncrement="false" />
    <column name="token"         type="VARCHAR" size="704" required="true" primaryKey="true"   autoIncrement="false" />
    <foreign-key foreignTable="employee">
      <reference local="employeeId" foreign="uid" />
    </foreign-key>
  </table>

  <table name="image">
    <column name="name"          type="VARCHAR" size="255" required="true"  primaryKey="true"  autoIncrement="false" />
    <column name="data"            type="VARBINARY"        required="true"  primaryKey="false" autoIncrement="false" />
  </table>

  <table name="role">
    <column name="id"              type="integer"          required="true"  primaryKey="true"  autoIncrement="false" />
    <column name="name"            type="varchar"          required="true"  primaryKey="false" autoIncrement="false" />
  </table>

  <table name="major">
    <column name="id"              type="integer"         required="true"   primaryKey="true"  autoIncrement="false" /> 
    <column name="name"            type="varchar"         required="true"   primaryKey="false" autoIncrement="false" /> 
    <column name="grad"            type="boolean"         required="true"   primaryKey="false" autoIncrement="false" /> 
  </table>

  <table name="walkin_hour">
    <column name="advisor_id"      type="char" size="7"    required="true"   primaryKey="true"  autoIncrement="false" />
    <column name="starts_at"       type="timestamp"        required="true"   primaryKey="true"  autoIncrement="false" />
    <column name="ends_at"         type="timestamp"        required="true"   primaryKey="true"  autoIncrement="false" />
    <foreign-key foreignTable="employee">
      <reference local="advisor_id" foreign="uid" />
    </foreign-key>
  </table>

  <table name="ad">
    <column name="id"              type="char" size="36"   required="true"  primaryKey="true"  autoIncrement="false" />
    <column name="url"             type="varchar"          required="true"  primaryKey="false" autoIncrement="false" />
    <column name="starts_at"       type="timestamp"        required="false" primaryKey="false" autoIncrement="false" />
    <column name="ends_at"         type="timestamp"        required="false" primaryKey="false" autoIncrement="false" />
  </table>

  <table name="hour">
    <column name="id"              type="INTEGER"          required="true"  primaryKey="true"  autoIncrement="true"  />
    <column name="advisor_id"      type="char" size="7"    required="true"  primaryKey="false" autoIncrement="false" />
    <column name="date"            type="timestamp"        required="false" primaryKey="false" autoIncrement="false" />
    <column name="start_recurrence" type="timestamp"       required="false" primaryKey="false" autoIncrement="false" />
    <column name="end_recurrence"  type="timestamp"        required="false" primaryKey="false" autoIncrement="false" />
    <column name="start_time"      type="timestamp"        required="false" primaryKey="false" autoIncrement="false" />
    <column name="end_time"        type="timestamp"        required="false" primaryKey="false" autoIncrement="false" />
    <column name="day_of_week"     type="INTEGER"          required="false" primaryKey="false" autoIncrement="false" />
    <foreign-key foreignTable="employee">
      <reference local="advisor_id" foreign="uid" />
    </foreign-key>
  </table>
    <!--
        When you're done with editing, open a terminal and run
            `$ vendor/bin/propel build`
        to generate the model classes.

        You should now be able to perform basic crud operations with your models. To learn how to use these models
        please look into our documentation: http://propelorm.org/documentation/03-basic-crud.html
    -->
</database>
